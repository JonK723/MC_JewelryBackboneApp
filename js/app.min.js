(function(){window.App={Models:{},Views:{},Collections:{},Routers:{}};window.mcTemplate=function(e){return _.template($("#"+e).html())};window.vent=_.extend({},Backbone.Events);App.Models.Product=Backbone.Model.extend({defaults:{prodName:"",collection:"none",category:"",details:"No data",img1:"",linkMacy:"#",linKohls:"#",linkSears:"#",linkKays:"#",id:"",url:""},initialize:function(){this.set("id",this.get("img1"));var e="!products/"+this.get("img1");this.set("url",e)}});App.Views.Product=Backbone.View.extend({model:App.Models.Product,className:"productThumb",thumbTemplate:mcTemplate("thumbTemplate"),template:mcTemplate("detailsTemplate"),eventlistener:vent,events:{click:"showDetails"},render:function(){mcProductRouter.navigate(this.model.get("url"));$("#stuff").html(this.template(this.model.toJSON())).fadeIn();$("#bigImage").wrap('<span style="display:inline-block"></span>').css("display","block").parent().zoom();$("#detailContainer").show();var e=location.href;var t=$("#bigImage").attr("src");t=e.substring(0,e.indexOf(".com")+4)+"&media="+e.substring(0,e.indexOf(".com")+4)+"/"+t+'&description="'+this.model.get("details")+'"';t=t.replace(/\//g,"%2F").replace(/\:/g,"%3A");var n=window.location.href.replace(/\//g,"%2F").replace(/\:/g,"%3A").replace(/\#/g,"%23");var r="https://twitter.com/share?url="+n;$("#emailShare").attr("href","mailto:?subject=I wanted you to see this site&body=Check out this product "+window.location.href);$("#pinterestShare").attr("href","http://pinterest.com/pin/create/button/?url="+t);$("#twitterShare").attr("href",r);return this},renderThumb:function(){this.$el.html(this.thumbTemplate(this.model.toJSON()));this.$el.fadeIn("slow");return this},renderSearch:function(){this.$el.html()},showDetails:function(){this.render()}});App.Views.ProductList=Backbone.View.extend({el:$("#productGallery"),initialize:function(){this.eventlistener.on("route:!products",this.getProduct,this);this.eventlistener.on("route:!search",this.findProduct,this)},eventlistener:vent,filteredList:null,events:{"route:!products":"getProduct","route:!search":"findProduct"},getProduct:function(e){var t=this.collection.get(e);if(t===undefined){return}var n=new App.Views.Product({model:t});n.showDetails();n.$el.parents("#leftFloat").click()},findProduct:function(e){var t=this;if(e===""&&$("#scrollbar3").data("page")==="searchPage"){this.filteredList=null;t.$el.children().remove()}else{this.filteredList=null;this.filteredList=_.filter(this.collection.models,function(t){var n=t.get("prodName");n=t.get("id").toLowerCase()+" "+n.toLowerCase();return n.indexOf(e.toLowerCase())!==-1});if(this.filteredList.length>0){$(".visuallyCentered").remove();t.$el.children().remove();_.each(this.filteredList,function(e){var n=new App.Views.Product({model:e});t.$el.append(n.renderThumb().el)});$("#scrollbar3").tinyscrollbar_update()}else{window.location="404.html"}}},render:function(e){var t=this;if(t.filteredList!=null&&t.filteredList.length>0){return}if(e===null||e===undefined){this.collection.each(function(e){var t=new App.Views.Product({model:e});this.$el.append(t.renderThumb().el)},this)}else{this.filteredList=_.filter(this.collection.models,function(t){return t.get("collection")===e});_.each(this.filteredList,function(e){var n=new App.Views.Product({model:e});t.$el.append(n.renderThumb().el)})}return this}});App.Collections.ProductCollection=Backbone.Collection.extend({model:App.Models.Product,initialize:function(){this.url="/!products"}});App.Routers=Backbone.Router.extend({routes:{"":"index","!product":"loadPage","!products/:id":"showProduct","!search/:query":"searchProduct"},index:function(){return},loadPage:function(){window.location=window.location.href.substring(0,window.location.href.indexOf("#"))},showProduct:function(e){$(".classiqueCollection").click();$(".chicCollection").click();vent.trigger("route:!products",e)},searchProduct:function(e){vent.trigger("route:!search",e)}})})();if(window.App!==undefined){window.mcProductCollection=new App.Collections.ProductCollection(productList,false);window.mcProductGallery=new App.Views.ProductList({collection:mcProductCollection});window.mcProductRouter=new App.Routers;Backbone.history.start()}
